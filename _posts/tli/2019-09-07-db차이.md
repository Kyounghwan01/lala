---
layout: post
title: "SQL, NOSQL 개념 및 장단점"
date: 2019-09-07
excerpt: "SQL, NOSQL 차이"
tag:
- DataBase
category: [TLI] 
feature: https://kyounghwan01.github.io/lala/assets/img/title/bj_title.jpg
comments: false






---

## SQL

> structured query language (구조화 된 쿼리 언어) 
>
> sql을 사용하면 관계형 데이터 베이스 관리시스템(RDBMS)에서 데이터를 저장, 수정, 삭제, 검색 가능하다

### 특징

- 데이터는 정해진(엄격한) 데이터 스키마를 따라 db 테이블에 저장된다
- 데이터는 관계를 통해서 연결된 여러개의 테이블에 분산된다. 

### 엄격한 스키마

- 데이터는 테이블에 레코드로 저장되며 각 테이블에는 명확하게 정의된 구조가 있다.

- 구조 :  어떤 데이터가 테이블에 들어가고 어떤 데이터가 그렇지 않음을 정의하는 필드 집합<br>
  필드 : columns, index<br>
  레코드 : 안에 들어가는 데이터 

- 구조는 필드의 이름과 데이터의 유형으로 정의

- 관계형 db에서는 스키마를 준수하지 않는 레코드는 추가할 수 없다 <br>
  즉, 더 많은 필드를 가지고 싶다면, 다른 테이블을 만들어 넣거나, 스키마를 뜯어 고쳐서 필드에 추가해야한다.

### 관계

데이터들은 여러개의 테이블에 나누어서, 데이터들의 중복을 피할 수 있다.

만약 사용자가 구입한 상품들을 나타내기 위해서는 user, product, order 같은 여러 테이블을 만들어야 하지만, <br>각각 테이블들은 다른 테이블에 저장되지 않은 데이터 만을 가진다. (중복된 데이터가 없다)<br>하나의 테이블에서 중복없이 하나의 데이터만을 관리하기 때문에, 다른 테이블에서 부정확한 데이터를 다룰 위험이 없다. (테이블간 독립성 유지)



## NOSQL

nosql은 기본적으로 sql과 반대되는 접근 방식을 따른다

- 스키마 없음
- 관계 없음

- sql에서 데이터는 레코드라 칭하였지만, no-sql에서는 문서(documents)라고 부른다.
- sql에서는 정해진 스키마를 따르지 않으면 데이터를 추가할 수 없지만, no-sql에서는 다른 구조의 데이터를 같은 컬렉션(sql의 테이블)에 추가 할 수 있다.
- no-sql의 문서(documents)에는 json데이터와 비슷한 형태를 가지고 있다.
  일반적으로 관련 데이터를 동일한 컬렉션에 넣는다. (sql처럼 여러 테이블에 나누어 담지 않는다.)
  즉 관계형 db에서 사용한 user,products정보 또한 orders에 포함하여 한번에 저장한다.
- 이러한 방식은 데이터가 중복되기에 불안정한 측면이 있다. User, product에는 orders정보가 동시에 들어가는데 user만 order의 정보를 바꿀경우를 말합니다.
- 즉, 데이터를 같이 사용하는 컬렉션에서 똑같은 데이터 업데이트를 수행하도록 해야한다
- 그럼에도.이러한 방식의 커다란 장점은 복잡하고 조인(다른 테이블의 값을 합침)을 사용할 필요가 없다는 것이다.
- 특히 자주 변경되지 않는 데이터 일때 더 큰 장점이 있다.



## 비교

### 수직적 확장

- db서버의 성능 확장 
- 둘다 가능

### 수평적 확장

- 데이터가 관계적으로 저장되기에 sql db는 수평적 확장은 지원하지 않는다
- nosql만이 수평확장 지원한다.
- 더많은 서버가 추가, db가 전체적으로 분산됨 (하나의 db여러 서버)



## 장점

### sql

- 명확하게 정의된 스키마 : 데이터 무결성 보장
- 관계는 각 데이터를 중복없이 한번만 저장

### nosql

- 스키마 없기에 훨씬 유연, 언제든지 저장된 데이터를 조정하고, 새로운 필드 추가 가능
- 데이터의 저장은 앱이 필요한 부분에 유동적으로 저장 (낭비 없음) => 속도 빨라짐
- 수직, 수평 확장 가능함으로 db가 앱에서 발생하는 모든 읽기/쓰기 요청 처리 가능



## 단점

### sql

- 덜유연, 데이터 스키마는 사전에 계획되고 알려져야함 (수정하기 매우 힘들다)
- 관계를 맺기에 JOIN문이 많은 복잡한 쿼리 생성
- 수평적 확장 불가, 수직적 확장만 가능. 즉, 어느 시점에서 확장의 한계에 직면

### nosql

- 중복된 데이터가 변경된 경우 여러개의 콜렉션에서 데이터를 바꿔야한다.

## 그래서 언제쓰는게 유리?

### sql

- 관계를 맺고있는 데이터가(JOIN된) 자주 변경되는 앱일 경우
- 변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우

### nosql

- 정확한 데이터 구조를 알 수 없거나 변경 / 확장 될 수 있는 경우
- 읽기 처리를 자루하지만 데이터를 자주 변경하지 않는 경우 (즉, 한번의 변경으로 많은 문서를 업뎃할 필요가 없는 경우)
- db를 수평적 확장 해야하는 경우(데이터의 양이 엄청나게 많은 경우)



### 가장 중요한 부분은 **설계**입니다

- nosql을 사용해도 설계적으로 위에 언급된 단점을 줄일 수 있습니다 (중복된 데이터 줄인다)

- sql 도 요구사항을 만족하면서 복잡한 JOIN문을 만들지 않도록 설계하는 것이 중요합니다.
